<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Class named_semaphore</title>
<link rel="stylesheet" href="../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="../../index.html" title="The Boost C++ Libraries BoostBook Documentation Subset">
<link rel="up" href="../../boost_interprocess_reference.html#header.boost.interprocess.sync.named_semaphore_hpp" title="Header &lt;boost/interprocess/sync/named_semaphore.hpp&gt;">
<link rel="prev" href="named_recursive_mutex.html" title="Class named_recursive_mutex">
<link rel="next" href="named_upgradable_mutex.html" title="Class named_upgradable_mutex">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../boost.png"></td>
<td align="center"><a href="../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="named_recursive_mutex.html"><img src="../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../boost_interprocess_reference.html#header.boost.interprocess.sync.named_semaphore_hpp"><img src="../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="named_upgradable_mutex.html"><img src="../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="refentry">
<a name="boost.interprocess.named_semaphore"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Class named_semaphore</span></h2>
<p>boost::interprocess::named_semaphore</p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="comment">// In header: &lt;<a class="link" href="../../boost_interprocess_reference.html#header.boost.interprocess.sync.named_semaphore_hpp" title="Header &lt;boost/interprocess/sync/named_semaphore.hpp&gt;">boost/interprocess/sync/named_semaphore.hpp</a>&gt;

</span>
<span class="keyword">class</span> <a class="link" href="named_semaphore.html" title="Class named_semaphore">named_semaphore</a> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
  <span class="comment">// types</span>
  <span class="keyword">typedef</span> <span class="emphasis"><em><span class="identifier">unspecified</span></em></span> <a name="boost.interprocess.named_semaphore.construct_func_t"></a><span class="identifier">construct_func_t</span><span class="special">;</span>

  <span class="comment">// <a class="link" href="named_semaphore.html#boost.interprocess.named_semaphoreconstruct-copy-destruct">construct/copy/destruct</a></span>
  <a class="link" href="named_semaphore.html#id846994-bb"><span class="identifier">named_semaphore</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="named_semaphore.html#id846998-bb"><span class="identifier">named_semaphore</span></a><span class="special">(</span><span class="keyword">const</span> <a class="link" href="named_semaphore.html" title="Class named_semaphore">named_semaphore</a> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="named_semaphore.html#id847108-bb"><span class="identifier">named_semaphore</span></a><span class="special">(</span><a class="link" href="create_only_t.html" title="Struct create_only_t">create_only_t</a><span class="special">,</span> <span class="keyword">const</span> <span class="keyword">char</span> <span class="special">*</span><span class="special">,</span> <span class="keyword">unsigned</span> <span class="keyword">int</span><span class="special">,</span> 
                  <span class="keyword">const</span> <a class="link" href="permissions.html" title="Class permissions">permissions</a> <span class="special">&amp;</span> <span class="special">=</span> <span class="identifier">permissions</span><span class="special">(</span><span class="special">)</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="named_semaphore.html#id847144-bb"><span class="identifier">named_semaphore</span></a><span class="special">(</span><a class="link" href="open_or_create_t.html" title="Struct open_or_create_t">open_or_create_t</a><span class="special">,</span> <span class="keyword">const</span> <span class="keyword">char</span> <span class="special">*</span><span class="special">,</span> <span class="keyword">unsigned</span> <span class="keyword">int</span><span class="special">,</span> 
                  <span class="keyword">const</span> <a class="link" href="permissions.html" title="Class permissions">permissions</a> <span class="special">&amp;</span> <span class="special">=</span> <span class="identifier">permissions</span><span class="special">(</span><span class="special">)</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="named_semaphore.html#id847183-bb"><span class="identifier">named_semaphore</span></a><span class="special">(</span><a class="link" href="open_only_t.html" title="Struct open_only_t">open_only_t</a><span class="special">,</span> <span class="keyword">const</span> <span class="keyword">char</span> <span class="special">*</span><span class="special">)</span><span class="special">;</span>
  named_semaphore&amp; <a class="link" href="named_semaphore.html#id847008-bb"><span class="keyword">operator</span><span class="special">=</span></a><span class="special">(</span><span class="keyword">const</span> <a class="link" href="named_semaphore.html" title="Class named_semaphore">named_semaphore</a> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="named_semaphore.html#id847202-bb"><span class="special">~</span><span class="identifier">named_semaphore</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>

  <span class="comment">// <a class="link" href="named_semaphore.html#id846970-bb">friend functions</a></span>
  <span class="keyword">friend</span> <span class="keyword">class</span> <a class="link" href="named_semaphore.html#id846974-bb"><span class="identifier">detail</span><span class="special">::</span><span class="identifier">interprocess_tester</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>

  <span class="comment">// <a class="link" href="named_semaphore.html#id847019-bb">public member functions</a></span>
  <span class="keyword">void</span> <a class="link" href="named_semaphore.html#id847022-bb"><span class="identifier">post</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">void</span> <a class="link" href="named_semaphore.html#id847037-bb"><span class="identifier">wait</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">bool</span> <a class="link" href="named_semaphore.html#id847052-bb"><span class="identifier">try_wait</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">bool</span> <a class="link" href="named_semaphore.html#id847067-bb"><span class="identifier">timed_wait</span></a><span class="special">(</span><span class="keyword">const</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">posix_time</span><span class="special">::</span><span class="identifier">ptime</span> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span>
  <span class="keyword">void</span> <a class="link" href="named_semaphore.html#id847089-bb"><span class="identifier">dont_close_on_destruction</span></a><span class="special">(</span><span class="special">)</span><span class="special">;</span>
  <a class="link" href="interprocess_semaphore.html" title="Class interprocess_semaphore">interprocess_semaphore</a> <span class="special">*</span> <a class="link" href="named_semaphore.html#id847097-bb"><span class="identifier">semaphore</span></a><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>

  <span class="comment">// <a class="link" href="named_semaphore.html#id847214-bb">public static functions</a></span>
  <span class="keyword">static</span> <span class="keyword">bool</span> <a class="link" href="named_semaphore.html#id847218-bb"><span class="identifier">remove</span></a><span class="special">(</span><span class="keyword">const</span> <span class="keyword">char</span> <span class="special">*</span><span class="special">)</span><span class="special">;</span>
  <span class="emphasis"><em><span class="identifier">unspecified</span></em></span> m_shmem<span class="special">;</span>
<span class="special">}</span><span class="special">;</span></pre></div>
<div class="refsect1">
<a name="id1601566"></a><h2>Description</h2>
<p>A semaphore with a global name, so it can be found from different processes. Allows several resource sharing patterns and efficient acknowledgment mechanisms. </p>
<div class="refsect2">
<a name="id1601574"></a><h3>
<a name="boost.interprocess.named_semaphoreconstruct-copy-destruct"></a><code class="computeroutput">named_semaphore</code> 
        public
       construct/copy/destruct</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<pre class="literallayout"><a name="id846994-bb"></a><span class="identifier">named_semaphore</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>@ </li>
<li class="listitem"><pre class="literallayout"><a name="id846998-bb"></a><span class="identifier">named_semaphore</span><span class="special">(</span><span class="keyword">const</span> <a class="link" href="named_semaphore.html" title="Class named_semaphore">named_semaphore</a> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span></pre></li>
<li class="listitem">
<pre class="literallayout"><a name="id847108-bb"></a><span class="identifier">named_semaphore</span><span class="special">(</span><a class="link" href="create_only_t.html" title="Struct create_only_t">create_only_t</a><span class="special">,</span> <span class="keyword">const</span> <span class="keyword">char</span> <span class="special">*</span> name<span class="special">,</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> initialCount<span class="special">,</span> 
                <span class="keyword">const</span> <a class="link" href="permissions.html" title="Class permissions">permissions</a> <span class="special">&amp;</span> perm <span class="special">=</span> <span class="identifier">permissions</span><span class="special">(</span><span class="special">)</span><span class="special">)</span><span class="special">;</span></pre>
<p>Creates a global semaphore with a name, and an initial count. If the semaphore can't be created throws interprocess_exception </p>
</li>
<li class="listitem">
<pre class="literallayout"><a name="id847144-bb"></a><span class="identifier">named_semaphore</span><span class="special">(</span><a class="link" href="open_or_create_t.html" title="Struct open_or_create_t">open_or_create_t</a><span class="special">,</span> <span class="keyword">const</span> <span class="keyword">char</span> <span class="special">*</span> name<span class="special">,</span> 
                <span class="keyword">unsigned</span> <span class="keyword">int</span> initialCount<span class="special">,</span> 
                <span class="keyword">const</span> <a class="link" href="permissions.html" title="Class permissions">permissions</a> <span class="special">&amp;</span> perm <span class="special">=</span> <span class="identifier">permissions</span><span class="special">(</span><span class="special">)</span><span class="special">)</span><span class="special">;</span></pre>
<p>Opens or creates a global semaphore with a name, and an initial count. If the semaphore is created, this call is equivalent to named_semaphore(create_only_t, ...) If the semaphore is already created, this call is equivalent to named_semaphore(open_only_t, ... ) and initialCount is ignored. </p>
</li>
<li class="listitem">
<pre class="literallayout"><a name="id847183-bb"></a><span class="identifier">named_semaphore</span><span class="special">(</span><a class="link" href="open_only_t.html" title="Struct open_only_t">open_only_t</a><span class="special">,</span> <span class="keyword">const</span> <span class="keyword">char</span> <span class="special">*</span> name<span class="special">)</span><span class="special">;</span></pre>
<p>Opens a global semaphore with a name if that semaphore is previously. created. If it is not previously created this function throws interprocess_exception. </p>
</li>
<li class="listitem"><pre class="literallayout">named_semaphore&amp; <a name="id847008-bb"></a><span class="keyword">operator</span><span class="special">=</span><span class="special">(</span><span class="keyword">const</span> <a class="link" href="named_semaphore.html" title="Class named_semaphore">named_semaphore</a> <span class="special">&amp;</span><span class="special">)</span><span class="special">;</span></pre></li>
<li class="listitem">
<pre class="literallayout"><a name="id847202-bb"></a><span class="special">~</span><span class="identifier">named_semaphore</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>@ <p>Destroys *this and indicates that the calling process is finished using the resource. The destructor function will deallocate any system resources allocated by the system for use by this process for this resource. The resource can still be opened again calling the open constructor overload. To erase the resource from the system use remove(). </p>
</li>
</ol></div>
</div>
<div class="refsect2">
<a name="id1602073"></a><h3>
<a name="id846970-bb"></a><code class="computeroutput">named_semaphore</code> friend functions</h3>
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<pre class="literallayout"><span class="keyword">friend</span> <span class="keyword">class</span> <a name="id846974-bb"></a><span class="identifier">detail</span><span class="special">::</span><span class="identifier">interprocess_tester</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>@ private: </li></ol></div>
</div>
<div class="refsect2">
<a name="id1602142"></a><h3>
<a name="id847019-bb"></a><code class="computeroutput">named_semaphore</code> public member functions</h3>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
<pre class="literallayout"><span class="keyword">void</span> <a name="id847022-bb"></a><span class="identifier">post</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>
<p>Increments the semaphore count. If there are processes/threads blocked waiting for the semaphore, then one of these processes will return successfully from its wait function. If there is an error an interprocess_exception exception is thrown. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">void</span> <a name="id847037-bb"></a><span class="identifier">wait</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>
<p>Decrements the semaphore. If the semaphore value is not greater than zero, then the calling process/thread blocks until it can decrement the counter. If there is an error an interprocess_exception exception is thrown. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">bool</span> <a name="id847052-bb"></a><span class="identifier">try_wait</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre>
<p>Decrements the semaphore if the semaphore's value is greater than zero and returns true. If the value is not greater than zero returns false. If there is an error an interprocess_exception exception is thrown. </p>
</li>
<li class="listitem">
<pre class="literallayout"><span class="keyword">bool</span> <a name="id847067-bb"></a><span class="identifier">timed_wait</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">posix_time</span><span class="special">::</span><span class="identifier">ptime</span> <span class="special">&amp;</span> abs_time<span class="special">)</span><span class="special">;</span></pre>
<p>Decrements the semaphore if the semaphore's value is greater than zero and returns true. Otherwise, waits for the semaphore to the posted or the timeout expires. If the timeout expires, the function returns false. If the semaphore is posted the function returns true. If there is an error throws sem_exception </p>
</li>
<li class="listitem"><pre class="literallayout"><span class="keyword">void</span> <a name="id847089-bb"></a><span class="identifier">dont_close_on_destruction</span><span class="special">(</span><span class="special">)</span><span class="special">;</span></pre></li>
<li class="listitem"><pre class="literallayout"><a class="link" href="interprocess_semaphore.html" title="Class interprocess_semaphore">interprocess_semaphore</a> <span class="special">*</span> <a name="id847097-bb"></a><span class="identifier">semaphore</span><span class="special">(</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span></pre></li>
</ol></div>
</div>
<div class="refsect2">
<a name="id1602440"></a><h3>
<a name="id847214-bb"></a><code class="computeroutput">named_semaphore</code> public static functions</h3>
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<pre class="literallayout"><span class="keyword">static</span> <span class="keyword">bool</span> <a name="id847218-bb"></a><span class="identifier">remove</span><span class="special">(</span><span class="keyword">const</span> <span class="keyword">char</span> <span class="special">*</span> name<span class="special">)</span><span class="special">;</span></pre>
<p>Erases a named semaphore from the system. Returns false on error. Never throws. </p>
</li></ol></div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2005 - 2010 Ion Gaztanaga<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="named_recursive_mutex.html"><img src="../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../boost_interprocess_reference.html#header.boost.interprocess.sync.named_semaphore_hpp"><img src="../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="named_upgradable_mutex.html"><img src="../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
